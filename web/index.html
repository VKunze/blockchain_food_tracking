<!DOCTYPE html>
<html lang="en">
<!-- Basic -->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Site Metas -->
  <title>FoodTracking - Ecommerce Bootstrap 4 HTML Template</title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Site Icons -->
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- Site CSS -->
  <link rel="stylesheet" href="css/style.css">
  <!-- Responsive CSS -->
  <link rel="stylesheet" href="css/responsive.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/custom.css">

  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <script>
    var abi = [{
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    }, {
      "anonymous": false,
      "inputs": [{
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }, {
        "indexed": true,
        "internalType": "address",
        "name": "approved",
        "type": "address"
      }, {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "Approval",
      "type": "event"
    }, {
      "anonymous": false,
      "inputs": [{
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }, {
        "indexed": true,
        "internalType": "address",
        "name": "operator",
        "type": "address"
      }, {
        "indexed": false,
        "internalType": "bool",
        "name": "approved",
        "type": "bool"
      }],
      "name": "ApprovalForAll",
      "type": "event"
    }, {
      "anonymous": false,
      "inputs": [{
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      }, {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }],
      "name": "OwnershipTransferred",
      "type": "event"
    }, {
      "anonymous": false,
      "inputs": [{
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      }, {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      }, {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "Transfer",
      "type": "event"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "to",
        "type": "address"
      }, {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "approve",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }],
      "name": "balanceOf",
      "outputs": [{
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [],
      "name": "baseURI",
      "outputs": [{
        "internalType": "string",
        "name": "",
        "type": "string"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [{
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "getApproved",
      "outputs": [{
        "internalType": "address",
        "name": "",
        "type": "address"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }, {
        "internalType": "address",
        "name": "operator",
        "type": "address"
      }],
      "name": "isApprovedForAll",
      "outputs": [{
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [],
      "name": "name",
      "outputs": [{
        "internalType": "string",
        "name": "",
        "type": "string"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [],
      "name": "owner",
      "outputs": [{
        "internalType": "address",
        "name": "",
        "type": "address"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [{
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "ownerOf",
      "outputs": [{
        "internalType": "address",
        "name": "",
        "type": "address"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [],
      "name": "renounceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "from",
        "type": "address"
      }, {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }, {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "safeTransferFrom",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "from",
        "type": "address"
      }, {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }, {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }, {
        "internalType": "bytes",
        "name": "_data",
        "type": "bytes"
      }],
      "name": "safeTransferFrom",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "operator",
        "type": "address"
      }, {
        "internalType": "bool",
        "name": "approved",
        "type": "bool"
      }],
      "name": "setApprovalForAll",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "bytes4",
        "name": "interfaceId",
        "type": "bytes4"
      }],
      "name": "supportsInterface",
      "outputs": [{
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [],
      "name": "symbol",
      "outputs": [{
        "internalType": "string",
        "name": "",
        "type": "string"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [{
        "internalType": "uint256",
        "name": "index",
        "type": "uint256"
      }],
      "name": "tokenByIndex",
      "outputs": [{
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }, {
        "internalType": "uint256",
        "name": "index",
        "type": "uint256"
      }],
      "name": "tokenOfOwnerByIndex",
      "outputs": [{
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [{
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "tokenURI",
      "outputs": [{
        "internalType": "string",
        "name": "",
        "type": "string"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [],
      "name": "totalSupply",
      "outputs": [{
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "from",
        "type": "address"
      }, {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }, {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "transferFrom",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "addressProductor",
        "type": "address"
      }, {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }, {
        "internalType": "string",
        "name": "tipoContenido",
        "type": "string"
      }, {
        "internalType": "string",
        "name": "nombreComercialProductor",
        "type": "string"
      }],
      "name": "crearCajon",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "obtenerCajon",
      "outputs": [{
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }, {
        "internalType": "string",
        "name": "",
        "type": "string"
      }, {
        "components": [{
          "internalType": "address",
          "name": "addressLector",
          "type": "address"
        }, {
          "internalType": "uint256",
          "name": "fecha",
          "type": "uint256"
        }, {
          "internalType": "string",
          "name": "nombreComercial",
          "type": "string"
        }],
        "internalType": "struct Cajon.puntoCadena[]",
        "name": "",
        "type": "tuple[]"
      }],
      "stateMutability": "view",
      "type": "function",
      "constant": true
    }, {
      "inputs": [{
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }],
      "name": "destruirCajon",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }, {
        "internalType": "address",
        "name": "addressLector",
        "type": "address"
      }, {
        "internalType": "string",
        "name": "nombreComercial",
        "type": "string"
      }],
      "name": "agregarPuntoCadena",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "account",
        "type": "address"
      }],
      "name": "addToWhitelistProductores",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "account",
        "type": "address"
      }],
      "name": "addToWhitelistPuntosVenta",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "account",
        "type": "address"
      }],
      "name": "addToWhitelistDistribuidores",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "account",
        "type": "address"
      }],
      "name": "removeFromWhitelistProductores",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "account",
        "type": "address"
      }],
      "name": "removeFromWhitelistPuntosVenta",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }, {
      "inputs": [{
        "internalType": "address",
        "name": "account",
        "type": "address"
      }],
      "name": "removeFromWhitelistDistribuidores",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }]
  </script>

</head>

<body>
  <script>
    if (window.ethereum) {
      window.web3 = new Web3(window.ethereum);
      window.ethereum.enable();

      window.cajon = new window.web3.eth.Contract(abi, '0xDbd130C0010CB3948fc7e38Bbc0afE1d93a33cf8');

      window.cajon.events.Transfer({}, function (error, event) {
        console.log(event);
      });
      console.log("Connected!")
    }
    lastIndex = 0
    var nombre = ''


    async function obtenerCuentas() {
      var cuentas = await window.web3.eth.getAccounts();
      return cuentas;
    }

    async function agregarAWhitelist(address, tipoWhitelist) {
      console.log("in main")
      var cuentas = await obtenerCuentas()
      if (tipoWhitelist == "productores") {
        window.cajon.methods.addToWhitelistProductores(address).send({ from: cuentas[0] });
      } else if (tipoWhitelist == "distribuidores") {
        window.cajon.methods.addToWhitelistDistribuidores(address).send();
      } else if (tipoWhitelist == "puntosVenta") {
        window.cajon.methods.isInWhitelistPuntosVenta(address).send();
      }
    }

    // Productor: 0

    async function crearCajon(tipoContenido, nombreComercialProductor, codigoQR) {
      cuenta = await obtenerCuentas()
      window.cajon.methods.crearCajon(cuenta[0], codigoQR, tipoContenido, nombreComercialProductor)
      console.log("ee")
    }

    async function obtenerCajon(tokenId) {
      datos = await window.cajon.methods.obtenerCajon(tokenId)
      return datos
    }

    async function agregarPuntoCadena(tokenId, nombreComercial) {
      cuenta = await obtenerCuentas()
      window.cajon.methods.agregarPuntoCadena(tokenId, cuenta[1], nombreComercial)
    }
  </script>
  <!-- Start Main Top -->
  <header class="main-header">
    <!-- Start Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-default bootsnav">
      <div class="container">
        <!-- Start Header Navigation -->
        <div class="navbar-header">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu"
            aria-controls="navbars-rs-food" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fa fa-bars"></i>
          </button>
          <a class="navbar-brand" href="index.html"><img src="images/logo.png" class="logo" alt=""></a>
        </div>
        <!-- End Header Navigation -->

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="navbar-menu">
          <ul class="nav navbar-nav ml-auto" data-in="fadeInDown" data-out="fadeOutUp">
            <li class="nav-item active"><a class="nav-link" href="index.html">Inicio</a></li>
            <li class="nav-item"><a class="nav-link" href="#registrarse">Registrarse</a></li>
            <li class="nav-item"><a class="nav-link" href="#ingresarLote">Agregar nuevo cajón</a></li>
            <li class="nav-item"><a class="nav-link" href="#infoLote">Información sobre lotes</a></li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->

      </div>
    </nav>
    <!-- End Navigation -->
  </header>
  <!-- End Main Top -->

  <!-- Start Top Search -->
  <div class="top-search">
    <div class="container">
      <div class="input-group">
        <span class="input-group-addon"><i class="fa fa-search"></i></span>
        <input type="text" class="form-control" placeholder="Search">
        <span class="input-group-addon close-search"><i class="fa fa-times"></i></span>
      </div>
    </div>
  </div>
  <!-- End Top Search -->

  <!-- Start Slider -->
  <div id="slides-shop" class="cover-slides">
    <ul class="slides-container">
      <li class="text-center">
        <img src="images/banner-01.jpg" alt="">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <h1 class="m-b-20"><strong>Bienvenidos a <br> FoodTracking</strong></h1>
              <p class="m-b-40">Conoce la verdadera procedencia de tus alimentos <br>.</p>
              <!--<p><a class="btn hvr-hover" href="#">Shop New</a></p>-->
            </div>
          </div>
        </div>
      </li>
      <li class="text-center">
        <img src="images/banner-02.jpg" alt="">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <h1 class="m-b-20"><strong>Bienvenidos a <br> FoodTracking</strong></h1>
              <p class="m-b-40">Conoce la verdadera procedencia de tus alimentos</p>
              <!-- <p><a class="btn hvr-hover" href="#">Shop New</a></p>-->
            </div>
          </div>
        </div>
      </li>
      <li class="text-center">
        <img src="images/banner-03.jpg" alt="">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <h1 class="m-b-20"><strong>Bienvenidos a <br> FoodTracking</strong></h1>
              <p class="m-b-40">Conoce la verdadera procedencia de tus alimentos</p>
              <!-- <p><a class="btn hvr-hover" href="#">Shop New</a></p> -->
            </div>
          </div>
        </div>
      </li>
    </ul>
    <div class="slides-navigation">
      <a href="#" class="next"><i class="fa fa-angle-right" aria-hidden="true"></i></a>
      <a href="#" class="prev"><i class="fa fa-angle-left" aria-hidden="true"></i></a>
    </div>
  </div>
  <!-- End Slider -->

  <!-- Start Registrarse  -->
  <div id="registrarse" class="contact-box-main">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-sm-12">
          <div class="contact-form-right">
            <h2>REGÍSTRESE</h2>
            <p>Complete los campos para registrar su empresa.</p>
            <form id="contactForm">
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group">
                    <input type="text" class="form-control" id="nombre" name="name" placeholder="Razón Social" required
                      data-error="Por favor complete este campo">
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="form-group">
                    <select id="rubro" class="selectpicker show-tick form-control dropdown" data-placeholder="Rubro"
                      style="cursor:pointer">
                      <option data-display="Select">Rubro</option>
                      <option value="productores">Productor</option>
                      <option value="distribuidores">Distribuidor</option>
                      <option value="puntosVenta">Punto de venta</option>
                    </select>
                    <div class="overlay-arrow">&#9660;</div>
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="form-group">
                    <input type="text" placeholder="RUT" id="rut" class="form-control" name="name" required
                      data-error="Por favor complete este campo">
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="form-group">
                    <input type="text" placeholder="Dirección" id="direccion" class="form-control" name="name" required
                      data-error="Por favor complete este campo">
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="form-group">
                    <input type="text" placeholder="Teléfono" id="telefono" class="form-control" name="name" required
                      data-error="Por favor complete este campo">
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="form-group">
                    <input type="text" placeholder="Email" id="email" class="form-control" name="name" required
                      data-error="Please enter your email">
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
                <!-- <div class="col-md-12">
                                  <div class="form-group">
                                      <textarea class="form-control" id="message" placeholder="Your Message" rows="4" data-error="Write your message" required></textarea>
                                      <div class="help-block with-errors"></div>
                                  </div> -->


                <p>Complete el siguiente campo con su cuenta en Ethereum</p>
                <div class="col-md-12">
                  <div class="form-group">
                    <input type="text" placeholder="Address" id="address" class="form-control" name="name" required
                      data-error="Por favor complete este campo">
                    <div class="help-block with-errors"></div>
                  </div>
                </div>
              </div>
              <div class="submit-button text-center">
                <button class="btn hvr-hover" id="registrar">Registrar</button>
                <!--  <div id="msgSubmit" class="h3 text-center hidden"></div> -->
                <!-- <div class="clearfix"></div> -->
              </div>

          </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- End Registrarse -->

  <!-- Start Ingresar Lote  -->
  <div id="ingresarLote" class="contact-box-main" style="background-color: #b0b435;">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-sm-12">
          <div class="contact-form-right">
            <h2>INGRESAR LOTE</h2>
            <p>Indique a continuación el contenido del nuevo lote y presione el botón para obtener un código QR asociado
              al mismo. </p>
            <!-- <form> -->
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <input type="text" class="form-control" id="contenido" name="name" placeholder="Contenido" required
                    data-error="Por favor complete este campo">
                  <div class="help-block with-errors"></div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="text-center">

                  <button class="btn hvr-hover" id='btnIngresarLote'
                    style="background-color: #979c83;color: white;">Ingresar lote</button>

                  <!-- <div id="msgSubmit" class="h3 text-center hidden"></div> -->
                  <!-- <div class="clearfix"></div> -->
                </div>
                <p id="msj" style="display: none; margin-top: 15px;">Tome una captura del siguiente código para poder
                  imprimirlo y ubicarlo en el cajón correspondiente al lote que acaba de ingresar: </p>
                <div id="qrcode"></div>

              </div>
            </div>
            <!-- </form> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End Ingresar Lote -->

  <!-- Start Ver Lote -->
  <div id="infoLote" class="all-title-box">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <h2>Buscar un lote</h2>
          <div class="search-product">

            <input class="form-control" placeholder="Buscar aquí..." type="text" id=idToken>
            <button id="buscarLote"> <i class="fa fa-search"></i> </button>

          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="shop-detail-box-main" style="display: none;" id=detallesCajon>
    <div class="container">
      <div class="row">
        <div class="row my-5">
          <div class="card card-outline-secondary my-4">
            <div id=tipoContenidoCajon></div>
            <div class="card-header">
              <h2>Trayectoria del lote</h2>
            </div>
            <div class="card-body">
              <div class="media mb-3">

                <div class="media-body">
                  <p id="puntoCadena0-nombreComercial"></p>
                  <small id="puntoCadena0-fecha" class="text-muted"></small>
                </div>
              </div>
              <hr>
              <div class="media mb-3">

                <div class="media-body">
                  <p id="puntoCadena1-nombreComercial"></p>
                  <small id="puntoCadena1-fecha" class="text-muted"></small>
                </div>
              </div>
              <hr>
              <div class="media mb-3">

                <div class="media-body">
                  <p id="puntoCadena2-nombreComercial"></p>
                  <small id="puntoCadena2-fecha" class="text-muted"></small>
                </div>
              </div>
              <hr>
              <a href="#" class="btn hvr-hover" id="agregarPuntoCadena">Agregar ubicación</a>
              <div class="alert alert-success" style="display: none;" id="ptoAgregado" role="alert">
                Ubicación agregada correctamente
              </div>
              <div class="alert alert-danger" style="display: none;" id="ptoNoAgregado" role="alert">
                Para utilizar esta función es necesario que primero se autentique
              </div>
            </div>
            <hr>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- End Ver Lote -->

  <!-- Start Instagram Feed  -->
  <div class="instagram-box">
    <div class="main-instagram owl-carousel owl-theme">
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-01.jpg" alt="" />
          <div class="hov-in">
            ><i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-02.jpg" alt="" />
          <div class="hov-in">
            <i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-03.jpg" alt="" />
          <div class="hov-in">
            <i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-04.jpg" alt="" />
          <div class="hov-in">
            <i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-05.jpg" alt="" />
          <div class="hov-in">
            <i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-06.jpg" alt="" />
          <div class="hov-in">
            <i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-07.jpg" alt="" />
          <div class="hov-in">
            <i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-08.jpg" alt="" />
          <div class="hov-in">
            ><i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-09.jpg" alt="" />
          <div class="hov-in">
            <i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
      <div class="item">
        <div class="ins-inner-box">
          <img src="images/instagram-img-05.jpg" alt="" />
          <div class="hov-in">
            <i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End Instagram Feed  -->


  <!-- Start Footer  -->
  <footer>
    <div class="footer-main">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-2 col-sm-2">
            <div class="footer-widget">
              <h4>Sobre FoodTracking</h4>
              <p>Todos los productores son previamente evaluados </p>
              <p>Contamos con el apoyo de los mejores nutricionistas del país </p>

            </div>
          </div>
          <div class="col-lg-8 col-md-2 col-sm-2">
            <div class="footer-link-contact">
              <h4>Contact Us</h4>
              <ul>
                <li>
                  <p><i class="fas fa-map-marker-alt"></i>Diección: Montevideo </p>
                </li>
                <li>
                  <p><i class="fas fa-phone-square"></i>Phone: 099999999</a>
                  </p>
                </li>
                <li>
                  <p><i class="fas fa-envelope"></i>Email: contactinfo@gmail.com</a>
                  </p>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- End Footer  -->

  <!-- Start copyright  -->
  <div class="footer-copyright">
    <p class="footer-company">All Rights Reserved. &copy; 2018 Design By : Valentina Kunze, Stephanie Mendonca, Victoria
      Tejera</a>
    </p>
  </div>
  <!-- End copyright  -->

  <a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>

  <!-- ALL JS FILES -->
  <script src="js/jquery-3.2.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <!-- ALL PLUGINS -->
  <script src="js/jquery.superslides.min.js"></script>
  <script src="js/bootstrap-select.js"></script>
  <script src="js/inewsticker.js"></script>
  <script src="js/bootsnav.js"></script>
  <script src="js/images-loded.min.js"></script>
  <script src="js/isotope.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/baguetteBox.min.js"></script>
  <script src="js/form-validator.min.js"></script>
  <script src="js/contact-form-script.js"></script>
  <script src="js/custom.js"></script>

  <script>
    function obtenerIndex() {
      lastIndex = lastIndex + 1
      return lastIndex
    }
    document.addEventListener("DOMContentLoaded", async function (event) {

      if (document.querySelector("#agregarPuntoCadena")) {
        document.querySelector("#agregarPuntoCadena").addEventListener("click", async function () {
          var tokenId = document.getElementById("idToken").innerHTML
          if (tokenId != "" && nombre != "") {
            console.log("En agregar pto cadena: " + tokenId + nombre)
            await agregarPuntoCadena(tokenId, nombre)
            document.querySelector("#ptoAgregado").fadeIn();
            setTimeout(function () {
              jQuery("#ptoAgregado").fadeOut();
            }, 3000);
          } else {
            document.querySelector("#ptoNoAgregado").fadeIn();
            setTimeout(function () {
              jQuery("#ptoNoAgregado").fadeOut();
            }, 3000);
          }
        });
      }

      if (document.querySelector("#registrar")) {
        console.log("Entro")
        document.querySelector("#registrar").addEventListener("click", async function () {
          var address = document.getElementById("address").value
          var tipoWhitelist = document.getElementById("rubro").value
          nombre = document.getElementById("nombre").value
          await agregarAWhitelist(address, tipoWhitelist)
          console.log("SUCCESS!")
        });
      }

      if (document.querySelector("#buscarLote")) {
        console.log("ENTRó")
        document.querySelector("#buscarLote").addEventListener("click", async function () {
          console.log("HI")
          var tokenId = document.getElementById("idToken").value
          datos = await obtenerCajon(tokenId)
          document.getElementById("detallesCajon").style.display = "block"
          document.getElementById("tipoContenidoCajon").innerHTML = datos[1]
          try{
            for (i = 0; i < 3; i++) {
              document.getElementById("puntoCadena" + i + "-" + "nombreComercial").innerHTML = datos[2][i]["nombreComercial"]
              document.getElementById("puntoCadena" + i + "-" + "fecha").innerHTML = datos[2][i]["fecha"]

            }
          }catch(error){}
        });
      }
      if (document.querySelector("#btnIngresarLote")) {
        document.querySelector("#btnIngresarLote").addEventListener("click", async function () {
          var id = obtenerIndex()
          var options = {
            text: id
          }
          qrCode = new QRCode(document.getElementById("qrcode"), options);
          document.getElementById("msj").style.display = "block";
          crearCajon(document.getElementById("contenido").textContent(), nombre, id);
          print("NUEVO CAJÓN: " + document.getElementById("contenido").textContent() + nombre + id)
        });
      }

    })
  </script>
</body>

</html>